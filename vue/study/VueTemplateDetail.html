<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>使用组件的细节</title>
        <script src="./vue.js"></script>
    </head>
    <body>
        <div id="app">
            <table>
                <tbody>
                    <tr is="row"></tr>
                    <tr is="row"></tr>
                    <tr is="row"></tr>
                </tbody>
            </table>
            <div 
                ref="hello" 
                @click="handleClick"
            >
                hello world
            </div>
            <counter ref="one" @change="handleChange"></counter>
            <counter ref="two" @change="handleChange"></counter>
            <div>{{total}}</div>
        </div>

        <script>

            var row = {
                // 子组件中的data必须是函数
                data: function() {
                    return {
                        content: "this is content"
                    }
                },
                template: "<tr><td>{{content}}</td></tr>"
            }

            var counter = {
                template: "<div @click='handleDivClick'>{{number}}</div>",
                data: function() {
                    return {
                        number: 0
                    }
                },
                methods: {
                    handleDivClick: function() {
                        this.number++
                        this.$emit('change')
                    }
                }
            }
            //Vue.component('row', {
            //    data: function() {
            //        return {
            //            content: "this is content"
            //        }
            //    },
            //    template: "<tr><td>{{content}}</td></tr>"
            //})
            //Vue.component('counter', {
            //    template: "<div @click='handleDivClick'>{{number}}</div>",
            //    data: function() {
            //        return {
            //            number: 0
            //        }
            //    },
            //    methods: {
            //        handleDivClick: function() {
            //            this.number++
            //            this.$emit('change')
            //        }
            //    }
            //})
            var app = new Vue({
                el: '#app',
                data: {
                    total: 0
                },
                components: {
                    row: row,
                    counter: counter
                },
                methods: {
                    handleClick: function() {
                        // 定义在标签上的通过$refs获取一个DOM元素
                        alert(this.$refs.hello.innerHTML)
                    },
                    handleChange: function() {
                        // 定义在组件上的通过$refs获取组件的引用
                        this.total = this.$refs.one.number + this.$refs.two.number
                    }
                }
            })
        </script>
    </body>
</html>